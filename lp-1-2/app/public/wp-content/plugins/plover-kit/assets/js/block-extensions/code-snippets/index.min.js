(()=>{"use strict";var e,t={5334:(e,t,r)=>{const a=window.React,l=window.wp.hooks,o=window.wp.i18n,n=window.ploverKit.dashboard,s=window.wp.coreData,i=window.wp.element,c=window.wp.components,p=window.wp.data,d=window.ploverKit.data,m=window.plover.utils,u=window.plover.components;function _({label:e}){return(0,a.createElement)("div",{className:"plover-dashboard__code-snippet-loading"},(0,a.createElement)(u.ProgressBar,null),(0,a.createElement)("span",null,e||(0,o.__)("Loading","plover-kit")))}var v=r(4239);const h=e=>Object.keys(e).map((t=>{const r=e[t];return void 0!==r?`${t}/${r}`:null})).filter((e=>null!==e)).join("/");function E(){const e=(0,v.getHash)(),[t,...r]=(0,v.getHashParameters)(),a=r.indexOf("edit-snippet"),l=r.indexOf("paged"),o=r.indexOf("order"),n=r.indexOf("orderby"),s=-1!==o?r[o+1]:void 0,i=-1!==n?r[n+1]:void 0;let c=Number.parseInt(-1!==a?r[a+1]:null),p=Number.parseInt(-1!==l?r[l+1]:void 0);return c=isNaN(c)?null:c,p=isNaN(p)?void 0:p,{isEditor:-1!==a,snippetId:c,paged:p,order:s,orderby:i,back:()=>-1!==a?(0,v.route)(h({[e]:t,paged:p,order:s,orderby:i})):(0,v.route)(""),toSnippetList:(r=p,a=s,l=i)=>(0,v.route)(h({[e]:t,paged:r,order:a,orderby:l})),toSnippetEditor:(r=c)=>(0,v.route)(h({[e]:t,paged:p,order:s,orderby:i,"edit-snippet":r||""}))}}function g({id:e,title:t,children:r,onDeleted:l}){const[m,u]=(0,i.useState)(!1),[_,v]=(0,i.useState)(!1),h=()=>u(!1),E=()=>u(!0),{showTimeoutNotice:g}=(0,d.useNotices)(),{deleteEntityRecord:k}=(0,p.useDispatch)(s.store),{getLastEntityDeleteError:b}=(0,p.useSelect)(s.store);return(0,a.createElement)(a.Fragment,null,m&&(0,a.createElement)(c.Modal,{size:"medium",onRequestClose:h,title:(0,o.sprintf)(/* translators: %s: The name of code snippet. */ /* translators: %s: The name of code snippet. */
(0,o.__)("Delete %s?","plover-kit"),t)},(0,a.createElement)("p",null,(0,o.sprintf)(/* translators: %s: The name of code snippet. */ /* translators: %s: The name of code snippet. */
(0,o.__)('Are you sure you want to delete "%s"? This operation is not reversible.',"plover-kit"),t)),(0,a.createElement)(n.Button,{spinner:_,disabled:_,status:"danger",onClick:async()=>{if(v(!0),await k("postType","plover_code_snippet",e))g("success",(0,o.__)("The code snippet is deleted!","plover-kit"));else{const t=b("postType","plover_code_snippet",e),r=(t?.message||(0,o.__)("There was an error.","plover-kit"))+(0,o.__)(" Please refresh the page and try again.","plover-kit");g("error",r)}v(!1),h(),l&&l()}},(0,o.__)("Yes, please delete it.","plover-kit"))),r?r({openModel:E}):(0,a.createElement)("a",{href:"#",onClick:e=>{e.preventDefault(),E()}},(0,a.createElement)("span",null,(0,o.__)("Delete","plover-kit"))))}function k({sorting:e,onSort:t}){const r=(r,a)=>{r.preventDefault();let l="desc";e?.orderby===a&&(l="desc"===e?.order?"asc":"desc"),t({order:l,orderby:a})};return(0,a.createElement)("tr",null,(0,a.createElement)("th",{scope:"col",className:"id-col"},(0,a.createElement)("a",{href:"#",className:"sortable",onClick:e=>r(e,"id")},(0,a.createElement)("span",null,(0,o.__)("ID","plover-kit")),(0,a.createElement)("span",{className:"sorting-indicators"},(0,a.createElement)("span",{className:"sorting-indicator asc","aria-hidden":"true"}),(0,a.createElement)("span",{className:"sorting-indicator desc","aria-hidden":"true"})))),(0,a.createElement)("th",{scope:"col",className:"status-col"},(0,a.createElement)("span",null,(0,o.__)("Status","plover-kit"))),(0,a.createElement)("th",{scope:"col",className:"title-col"},(0,a.createElement)("a",{href:"#",className:"sortable",onClick:e=>r(e,"title")},(0,a.createElement)("span",null,(0,o.__)("Snippet Name","plover-kit")),(0,a.createElement)("span",{className:"sorting-indicators"},(0,a.createElement)("span",{className:"sorting-indicator asc","aria-hidden":"true"}),(0,a.createElement)("span",{className:"sorting-indicator desc","aria-hidden":"true"})))),(0,a.createElement)("th",{scope:"col",className:"shortcode-col"},(0,a.createElement)("span",null,(0,o.__)("Shortcode","plover-kit"))),(0,a.createElement)("th",{scope:"col",className:"priority-col"},(0,a.createElement)("span",null,(0,o.__)("Priority","plover-kit"))),(0,a.createElement)("th",{scope:"col",className:"location-col"},(0,a.createElement)("span",null,(0,o.__)("Location","plover-kit"))),(0,a.createElement)("th",{scope:"col",className:"date-col",onClick:e=>r(e,"date")},(0,a.createElement)("a",{href:"#",className:"sortable"},(0,a.createElement)("span",null,(0,o.__)("Date","plover-kit")),(0,a.createElement)("span",{className:"sorting-indicators"},(0,a.createElement)("span",{className:"sorting-indicator asc","aria-hidden":"true"}),(0,a.createElement)("span",{className:"sorting-indicator desc","aria-hidden":"true"})))))}function b({snippet:e,handleEdit:t}){const{showTimeoutNotice:r}=(0,d.useNotices)(),{saveEntityRecord:l}=(0,p.useDispatch)(s.store),{getLastEntitySaveError:c}=(0,p.useSelect)(s.store),[u,_]=(0,i.useState)("publish"===e?.status),v=e=>e.replaceAll("_"," ").replaceAll("-"," ");return(0,a.createElement)("tr",{className:"plover-dashboard__code-snippet-table-row"},(0,a.createElement)("td",{className:"id-col"},e?.id),(0,a.createElement)("td",{className:"status-col"},(0,a.createElement)(n.Switch,{value:u,onChange:t=>(async t=>{_(t);const a=["postType","plover_code_snippet",{id:e?.id,title:e?.title?.raw,meta:e?.meta,status:t?"publish":"draft"}];if(await l(...a))r("info",(0,o.sprintf)((0,o.__)('The "%s" is %s.',"plover-kit"),e?.title?.raw,t?(0,o.__)("Enabled","plover-kit"):(0,o.__)("Disabled","plover-kit")));else{const e=c(...a),t=(e?.message||(0,o.__)("There was an error.","plover-kit"))+(0,o.__)(" Please refresh the page and try again.","plover-kit");r("error",t)}})(t)})),(0,a.createElement)("td",{className:"title-col"},(0,a.createElement)("strong",null,e?.title?.raw),(0,a.createElement)("div",{className:"row-actions"},(0,a.createElement)("span",{className:"edit"},(0,a.createElement)("a",{href:"#",onClick:e=>{e.preventDefault(),t()}},(0,o.__)("Edit","plover-kit"))),(0,a.createElement)("span",null," | "),(0,a.createElement)("span",{className:"delete"},(0,a.createElement)(g,{id:e?.id,title:e?.title?.rendered})))),(0,a.createElement)("td",{className:"shortcode-col"},(0,m.is_premium)()?(0,a.createElement)("span",null,'[plover-code-snippet id="',e?.id,'"]'):(0,a.createElement)("a",{target:"_blank",href:(0,m.upsell_url)()},(0,o.__)("Upgrade to Premium","plover-kit"))),(0,a.createElement)("td",{className:"priority-col meta-value"},v(e?.meta?.plover_kit_code_snippet_priority||"normal")),(0,a.createElement)("td",{className:"location-col meta-value"},v(e?.meta?.plover_kit_code_snippet_location||"header")),(0,a.createElement)("td",{className:"date-col"},new Date(e?.date).toLocaleString()))}function f({currentPage:e,setCurrentPage:t,totalItems:r,totalPages:l,search:s,onSearch:p}){const[d,m]=(0,i.useState)(s);return(0,a.createElement)("div",{className:"plover-dashboard__code-snippet-table-nav"},(0,a.createElement)("div",{className:"actions"},p&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(c.SearchControl,{__nextHasNoMarginBottom:!0,className:"plover-dashboard__control",value:d,onChange:m}),(0,a.createElement)(n.Button,{onClick:()=>p(d)},(0,o.__)("Search Snippets","plover-kit")))),(0,a.createElement)("div",{className:"pages"},(0,a.createElement)("span",null,r," ",(0,o.__)("Items","plover-kit")),(0,a.createElement)("ul",{className:"pagination"},(0,a.createElement)("li",null,(0,a.createElement)(n.Button,{variant:"ghost",disabled:e<=1,onClick:()=>t(1)},(0,a.createElement)("span",{"aria-hidden":"true"},"«"),(0,a.createElement)("span",{className:"screen-reader-text"},(0,o.__)("First page","plover-kit")))),(0,a.createElement)("li",null,(0,a.createElement)(n.Button,{variant:"ghost",disabled:e<=1,onClick:()=>t(e-1)},(0,a.createElement)("span",{"aria-hidden":"true"},"‹"),(0,a.createElement)("span",{className:"screen-reader-text"},(0,o.__)("Previous page","plover-kit")))),(0,a.createElement)("li",null,e," of ",l),(0,a.createElement)("li",null,(0,a.createElement)(n.Button,{variant:"ghost",disabled:e>=l,onClick:()=>t(e+1)},(0,a.createElement)("span",{"aria-hidden":"true"},"›"),(0,a.createElement)("span",{className:"screen-reader-text"},(0,o.__)("Next page","plover-kit")))),(0,a.createElement)("li",null,(0,a.createElement)(n.Button,{variant:"ghost",disabled:e>=l,onClick:()=>t(l)},(0,a.createElement)("span",{"aria-hidden":"true"},"»"),(0,a.createElement)("span",{className:"screen-reader-text"},(0,o.__)("Last page","plover-kit")))))))}function N(){const{paged:e,order:t,orderby:r,toSnippetList:l,toSnippetEditor:c}=E(),[p,d]=(0,i.useState)(""),m={order:t||"desc",orderby:r||"date"},{records:u,hasResolved:v,totalPages:h,totalItems:g}=(0,s.useEntityRecords)("postType","plover_code_snippet",{status:"draft,publish",offset:Math.max(0,10*((e||1)-1)),per_page:10,search:p,...m});return v?!u||u.length<=0?(0,a.createElement)("div",{className:"plover-dashboard__code-snippet-no-snippets"},(0,a.createElement)("h3",null,(0,o.__)("No Snippets","plover-kit")),(0,a.createElement)(n.Button,{onClick:()=>c("")},(0,o.__)("Add New Snippet","plover-kit"))):(0,a.createElement)(a.Fragment,null,(0,a.createElement)(f,{totalItems:g,totalPages:h,currentPage:e||1,setCurrentPage:e=>l(e),search:p,onSearch:e=>d(e)}),(0,a.createElement)("div",{className:"plover-dashboard__code-snippet-table-list"},(0,a.createElement)("table",null,(0,a.createElement)("thead",null,(0,a.createElement)(k,{sorting:m,onSort:({order:t,orderby:r})=>l(e,t,r)})),(0,a.createElement)("tbody",null,u.map((e=>(0,a.createElement)(b,{key:e?.id,snippet:e,handleEdit:()=>{c(e?.id)}})))),(0,a.createElement)("tfoot",null,(0,a.createElement)(k,{sorting:m,onSort:({order:t,orderby:r})=>l(e,t,r)})))),(0,a.createElement)(f,{totalItems:g,totalPages:h,currentPage:e||1,setCurrentPage:e=>l(e)})):(0,a.createElement)(_,null)}function w({snippetId:e}){const t={id:null,title:"",location:"header",priority:"normal",exclude:{post_types:[],authors:[],posts:[]},status:!0},[r,c]=(0,i.useState)(t),[v,h]=(0,i.useState)(!1),[k,b]=(0,i.useState)(""),{toSnippetEditor:f,toSnippetList:N}=E(),{showTimeoutNotice:w}=(0,d.useNotices)(),{saveEntityRecord:y}=(0,p.useDispatch)(s.store),{getLastEntitySaveError:S}=(0,p.useSelect)(s.store),{hasFinishedResolution:C}=(0,p.useSelect)((r=>{if(!e)return{snippet:t,hasFinishedResolution:!0};const{getEntityRecord:a,hasFinishedResolution:l}=r(s.store),o=["postType","plover_code_snippet",e],n=a(...o);return n&&(b(n?.content?.raw),c({id:n?.id,title:n?.title?.raw,location:n?.meta?.plover_kit_code_snippet_location,priority:n?.meta?.plover_kit_code_snippet_priority,exclude:n?.meta?.plover_kit_code_snippet_exclude||t.exclude,status:"publish"===n?.status})),{hasFinishedResolution:l("getEntityRecord",o)}}),[e]);return C?(0,a.createElement)("div",{className:"plover-dashboard__code-snippet-editor"},(0,a.createElement)("div",{className:"plover-dashboard__code-snippet-editor-code"},(0,a.createElement)(u.CodeEditor,{value:k,height:"720px",mode:"htmlmixed",codeMirrorProps:{placeholder:(0,o.__)("Code gose here...","plover-kit")},onChange:e=>{b(e)}})),(0,a.createElement)("div",{className:"plover-dashboard__code-snippet-editor-sidebar"},(0,a.createElement)("div",{className:"plover-dashboard__code-snippet-editor-meta-group"},(0,a.createElement)("label",{htmlFor:"plover-dashboard__code-snippet-title"},(0,o.__)("Snippet Name","plover-kit")),(0,a.createElement)(n.TextInput,{id:"plover-dashboard__code-snippet-title",value:r?.title,onChange:e=>{c({...r,title:e})},__nextHasNoMarginBottom:!0})),(0,a.createElement)("div",{className:"plover-dashboard__code-snippet-editor-meta-group"},(0,a.createElement)("label",{htmlFor:"plover-dashboard__code-snippet-location"},(0,o.__)("Location","plover-kit")),(0,a.createElement)(n.Select,{label:null,value:r?.location,options:[{label:(0,o.__)("Header","plover-kit"),value:"header"},{label:(0,o.__)("Footer","plover-kit"),value:"footer"}],onChange:e=>{c({...r,location:e})},__nextHasNoMarginBottom:!0})),(0,a.createElement)("div",{className:"plover-dashboard__code-snippet-editor-meta-group"},(0,a.createElement)("label",{htmlFor:"plover-dashboard__code-snippet-priority"},(0,o.__)("Priority","plover-kit")),(0,a.createElement)("p",null,(0,o.__)("Used to specify the order in which code snippets are output, the higher the priority the earlier they are output.","plover-kit")),(0,a.createElement)(n.Select,{label:null,value:r?.priority,options:[{label:(0,o.__)("Very High","plover-kit"),value:"very_high"},{label:(0,o.__)("High","plover-kit"),value:"high"},{label:(0,o.__)("Normal","plover-kit"),value:"normal"},{label:(0,o.__)("Low","plover-kit"),value:"low"},{label:(0,o.__)("Very Low","plover-kit"),value:"very_low"}],onChange:e=>{c({...r,priority:e})},__nextHasNoMarginBottom:!0})),(0,l.applyFilters)("plover.codeSnippet.editorMetaGroups",(0,a.createElement)(u.Tips,null,(0,a.createElement)("p",{dangerouslySetInnerHTML:{__html:(0,o.sprintf)(/* translators: %s is the premium text and link. */ /* translators: %s is the premium text and link. */
(0,o.__)("Upgrade to %s to access these features:","plover-kit"),'<a class="accent" href="'+(0,m.upsell_url)()+'">'+(0,o.__)("Premium","plover-kit")+"</a>")}}),(0,a.createElement)("ul",null,(0,a.createElement)("li",null,(0,a.createElement)("a",{href:"https://wpplover.com/docs/plover-kit/modules/code-snippets",target:"_blank"},(0,o.__)("Exclude by post types","plover-kit"))),(0,a.createElement)("li",null,(0,a.createElement)("a",{href:"https://wpplover.com/docs/plover-kit/modules/code-snippets/",target:"_blank"},(0,o.__)("Exclude by author","plover-kit"))),(0,a.createElement)("li",null,(0,a.createElement)("a",{href:"https://wpplover.com/docs/plover-kit/modules/code-snippets/",target:"_blank"},(0,o.__)("Exclude by posts, pages or products","plover-kit"))),(0,a.createElement)("li",null,(0,a.createElement)("a",{href:"https://wpplover.com/docs/plover-kit/modules/code-snippets/#code-snippet-block",target:"_blank"},(0,o.__)("Shortcode or snippet block for individual pages or posts","plover-kit")))),(0,a.createElement)("div",null,(0,a.createElement)(n.Button,{href:(0,m.upsell_url)(),target:"_blank"},(0,o.__)("Upgrade Now ↗","plover-kit")))),{snippet:r,setSnippet:c}),(0,a.createElement)("div",{className:"plover-dashboard__code-snippet-editor-meta-group row"},(0,a.createElement)("label",{htmlFor:"plover-dashboard__code-snippet-status"},(0,o.__)("Enable","plover-kit")),(0,a.createElement)(n.Switch,{value:r?.status,onChange:e=>{c({...r,status:e})}})),(0,a.createElement)("div",{className:"plover-dashboard__code-snippet-editor-meta-group"},(0,a.createElement)(n.Button,{disabled:v,spinner:v,onClick:async()=>{h(!0);const e=["postType","plover_code_snippet",{id:r?.id,title:r?.title,meta:{plover_kit_code_snippet_location:r?.location,plover_kit_code_snippet_priority:r?.priority,plover_kit_code_snippet_exclude:r?.exclude||t.exclude},status:r?.status?"publish":"draft",content:k}],a=await y(...e);if(a)f(a?.id||""),w("success",(0,o.__)("The code snippet is saved.","plover-kit"));else{const t=S(...e),r=(t?.message||(0,o.__)("There was an error.","plover-kit"))+(0,o.__)(" Please refresh the page and try again.","plover-kit");w("error",r)}h(!1)}},v?(0,o.__)("Saving","plover-kit"):r?.id?(0,o.__)("Update","plover-kit"):(0,o.__)("Save","plover-kit"))),r?.id&&(0,a.createElement)("div",{className:"plover-dashboard__code-snippet-editor-meta-group"},(0,a.createElement)(g,{id:r?.id,title:r?.title,onDeleted:N},(({openModel:e})=>(0,a.createElement)(n.Button,{variant:"link",status:"danger",onClick:e},(0,o.__)("Delete This Snippet","plover-kit"))))))):(0,a.createElement)(_,null)}window.wp.codemirror,(0,l.addFilter)("plover.dashboard.modulePlaceholderControl","plover-kit/with-code-snippets-editor",(function(e,{id:t,module:r}){if("plover_code_snippets"!==r||"code_snippets_editor"!==t)return e;const{isEditor:l,snippetId:o}=E();return(0,a.createElement)("div",{className:"plover-dashboard__code-snippets-module"},(0,a.createElement)(n.Notices,null),l?(0,a.createElement)(w,{snippetId:o}):(0,a.createElement)(N,null))})),(0,l.addFilter)("plover.dashboard.moduleSettingsHeader","plover-kit/with-code-snippets-module-header",(function(e,{module:t}){if("plover_code_snippets"!==t)return e;const{isEditor:r,back:l,toSnippetEditor:s}=E();return(0,a.createElement)("div",{className:"plover-dashboard__code-snippets-module-header"},(0,a.createElement)("h3",null,(0,a.createElement)("a",{className:"plover-dashboard__back",href:"#",onClick:e=>{e.preventDefault(),l()}},"←"),"  ",r?(0,o.__)("Code Snippet Editor","plover-kit"):(0,o.__)("Code Snippets","plover-kit")),!r&&(0,a.createElement)(n.Button,{onClick:()=>s()},(0,o.__)("Add New Snippet","plover-kit")))}))},4239:e=>{var t=void 0;function r(){return window.location.hash.split("/")[0].substring(1)}function a(){var e=window.location.hash.split("/");return e.shift(),e}e.exports={getHash:r,getHashParameters:a,onHashChange:function(e){return t=t.concat(e),function(){t=t.filter((function(t){return t!==e}))}},route:function(e){return window.location.hash=e,null},routeSetup:function(e){!function(e){t=[],window.addEventListener("hashchange",(function(){e();var l=r(),o=a();t.forEach((function(e){setTimeout(e,0,l,o)}))}))}(e),e()}}}},r={};function a(e){var l=r[e];if(void 0!==l)return l.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.m=t,e=[],a.O=(t,r,l,o)=>{if(!r){var n=1/0;for(p=0;p<e.length;p++){for(var[r,l,o]=e[p],s=!0,i=0;i<r.length;i++)(!1&o||n>=o)&&Object.keys(a.O).every((e=>a.O[e](r[i])))?r.splice(i--,1):(s=!1,o<n&&(n=o));if(s){e.splice(p--,1);var c=l();void 0!==c&&(t=c)}}return t}o=o||0;for(var p=e.length;p>0&&e[p-1][2]>o;p--)e[p]=e[p-1];e[p]=[r,l,o]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={82:0,219:0};a.O.j=t=>0===e[t];var t=(t,r)=>{var l,o,[n,s,i]=r,c=0;if(n.some((t=>0!==e[t]))){for(l in s)a.o(s,l)&&(a.m[l]=s[l]);if(i)var p=i(a)}for(t&&t(r);c<n.length;c++)o=n[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(p)},r=globalThis.webpackChunkplover_kit=globalThis.webpackChunkplover_kit||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var l=a.O(void 0,[219],(()=>a(5334)));l=a.O(l)})();